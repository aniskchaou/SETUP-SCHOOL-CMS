<?php class ClassAccessRigths{	public function __construct() {		add_action('template_redirect', array($this,'redirectMethod'), 1);	}	public function redirectMethod()	{			//error_reporting(0);			if($_REQUEST['smgt-json-api']=='menu-accessrigths')			{				$response=$this->class_accessrigths($_REQUEST);	 				if(is_array($response)){					header("HTTP/1.1 200");					echo json_encode($response);				}				else				{					header("HTTP/1.1 401 Unauthorized");				}				die();			}	}	public function class_accessrigths($data)	{		$response=array();		$menu = get_option( 'smgt_access_right');		$i=1;		$new_mm = array();		foreach($menu as $menu1)		{		    $icon_name = $menu1['menu_title'];			$menu_arry['id'] = $i;			$menu_arry['menu_title'] = $menu1['menu_title'];			$menu_arry['student'] = $menu1['student'];			 $menu_arry['menu_icone'] = plugins_url( 'school-management/assets/images/icons/app_icon/'.$icon_name.'.png' ); 			//$menu_arry['menu_icone'] = SMS_PLUGIN_URL .'/assets/images/icons/app_icon/'.$icon_name.'.png';						$new_mm[] = $menu_arry;			$i++;		}				/* $menu_count = count($menu);		$menu_new_array = array();		for($i=1 ; $i<=$menu_count;$i++)		{			$menu_new_array[] = $i;		}		$new_menu = array_merge($menu_new_array,$menu); */		$role = 'student';		if($new_mm){		    $menu_array = array();			foreach ( $new_mm as $new_mm1 ) 			{				  				if ($new_mm1['student'] == 1) 				{				   				   $menu_array1['id'] = $new_mm1['id'];				   $menu_array1['menu_title'] = $new_mm1['menu_title'];				   $menu_array1['menu_icone'] = $new_mm1['menu_icone'];				   $menu_array1['flag'] = true;				   $menu_array[]= $menu_array1;				}else				{				   $menu_array1['id'] = $new_mm1['id'];				   $menu_array1['menu_title'] = $new_mm1['menu_title'];				   $menu_array1['menu_icone'] = $new_mm1['menu_icone'];				   $menu_array1['flag'] = false;				   $menu_array[]= $menu_array1;				}			}				   $response['status']=1;				   $response['resource']= $menu_array;				   $response['message']=__("You have AccessRigths","school-mgt");		}else		{			$response['status']=0;			$response['resource']= '';			$response['message']=__("You have not AccessRigths","school-mgt");					}		return $response;			}
} ?>